<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Arcade Management</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
<button id="settings-toggle" title="Setări temă">
    ⚙️
</button>

<div id="settings-popup">
    <button id="close-popup">✕</button>
    
    <div id="settings-bar">
        <h3>Modificare Temă</h3>
        <label for="theme-switch">Selectează Tema:</label>
        <select id="theme-switch">
            <option value="dark">Negru (Implicit)</option>
            <option value="light">Alb</option>
        </select>
    </div>
</div>

<main style="max-width: 500px; margin: 50px auto; padding: 20px; border: 2px solid #ff00ff; box-shadow: 0 0 15px #ff00ff; border-radius: 15px; background-color: rgba(0,0,0,0.6);">
    
    <h1 style="text-align:center; color:#00ffff; text-shadow:0 0 5px #00ffff;">Finalizează Comanda</h1>
    
    <form action="#" method="post">
        <!-- Locația sălii -->
        <label for="location" style="color:#00ffff; text-shadow:0 0 5px #00ffff;">Locația sălii:</label>
        <input type="text" id="location" name="location" placeholder="Ex: Str. Arcadei 12, București" required style="margin-bottom:20px;">

        <!-- Metoda de plată -->
        <label style="color:#00ffff; text-shadow:0 0 5px #00ffff;">Metoda de plată:</label><br>
        <input type="checkbox" id="cash" name="payment[]" value="cash">
        <label for="cash" style="color:#00ffff;">Cash</label><br>
        <input type="checkbox" id="card" name="payment[]" value="card">
        <label for="card" style="color:#00ffff;">Card</label><br>
        <input type="checkbox" id="installments" name="payment[]" value="installments">
        <label for="installments" style="color:#00ffff;">Rate</label><br><br>

        <button type="submit" class="arcade-button" style="width:100%;">Finalizează comanda</button>
    </form>

</main>
<script>
// Referințe la elementele DOM
const themeSwitch = document.getElementById('theme-switch');
const settingsToggle = document.getElementById('settings-toggle');
const settingsPopup = document.getElementById('settings-popup');
const closePopup = document.getElementById('close-popup');

// Funcție pentru aplicarea temei și salvarea ei
function applyTheme(theme) {
    document.body.classList.toggle('light', theme === 'light');
    localStorage.setItem('siteTheme', theme);
}

// 1. ÎNCAȚĂ TEMA LA STARTUP: Funcționează pe TOATE paginile.
document.addEventListener('DOMContentLoaded', () => {
    const savedTheme = localStorage.getItem('siteTheme') || 'dark';
    applyTheme(savedTheme);
    
    // Setează valoarea selectului, dacă elementul themeSwitch există pe pagină.
    if (themeSwitch) {
        themeSwitch.value = savedTheme; 
    }
});

// 2. SCHIMBĂ TEMA: Funcționează doar pe paginile care au selectorul de temă.
if (themeSwitch) {
    themeSwitch.addEventListener('change', () => {
        const theme = themeSwitch.value;
        applyTheme(theme);
    });
}

// 3. LOGICA POP-UP: Funcționează doar pe paginile care au elementele toggle/popup.
if (settingsToggle) {
    settingsToggle.addEventListener('click', () => {
        settingsPopup.classList.toggle('open');
    });
}

if (closePopup) {
    closePopup.addEventListener('click', () => {
        settingsPopup.classList.remove('open');
    });
}

// Închide pop-up-ul când se apasă tasta ESC
document.addEventListener('keydown', (event) => {
    if (event.key === 'Escape' && settingsPopup && settingsPopup.classList.contains('open')) {
        settingsPopup.classList.remove('open');
    }
});
</script>
</body>
</html>
